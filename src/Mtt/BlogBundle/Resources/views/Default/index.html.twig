{% extends "MttBlogBundle::main.html.twig" %}

{% block javascripts %}
    <!--[if lt IE 9]>
    <script type="text/javascript" src="/bundles/mttblog/components/es5-shim/es5-shim.min.js"></script>
    <![endif]-->
    <script src="{{ asset('bundles/fosjsrouting/js/router.js') }}"></script>
    <script src="{{ path('fos_js_routing_js', {'callback': 'fos.Router.setData'}) }}"></script>

    {% if app.environment == 'dev' %}
        {% javascripts filter='?uglifyjs2'
            '@MttBlogBundle/Resources/public/components/jquery/dist/jquery.js'
            '@MttBlogBundle/Resources/public/components/ember/ember-template-compiler.js'
            '@MttBlogBundle/Resources/public/components/ember/ember.debug.js'
            '@MttBlogBundle/Resources/public/components/ember-data/ember-data.js'
            '@MttBlogBundle/Resources/public/components/bootstrap/dist/js/bootstrap.js'
            '@MttBlogBundle/Resources/public/components/moment/moment.js'
            '@MttBlogBundle/Resources/public/components/moment/locale/ru.js'
            '@FOSJsRoutingBundle/Resources/public/js/router.js'
            'js/fos_js_routes.js'
        %}
        <script type="text/javascript" src="{{ asset_url }}"></script>
        {% endjavascripts %}
    {% else %}
        {% javascripts filter='?uglifyjs2'
            '@MttBlogBundle/Resources/public/components/jquery/dist/jquery.js'
            '@MttBlogBundle/Resources/public/components/ember/ember-template-compiler.js'
            '@MttBlogBundle/Resources/public/components/ember/ember.prod.js'
            '@MttBlogBundle/Resources/public/components/ember-data/ember-data.js'
            '@MttBlogBundle/Resources/public/components/bootstrap/dist/js/bootstrap.js'
            '@MttBlogBundle/Resources/public/components/moment/moment.js'
            '@MttBlogBundle/Resources/public/components/moment/locale/ru.js'
            '@FOSJsRoutingBundle/Resources/public/js/router.js'
            'js/fos_js_routes.js'
        %}
        <script type="text/javascript" src="{{ asset_url }}"></script>
        {% endjavascripts %}
    {% endif %}

    <script type="text/javascript">
        rest_url = '{{ path('mtt_blog_api_info') }}';
        var app_parameters = {
            api_url: rest_url.substr(1, rest_url.length - 2),
            locale: '{{ app.request.locale }}',
            environment: '{{ app.environment }}'
        };

        moment.locale(app_parameters.locale);
    </script>

    {% javascripts filter='?uglifyjs2'
        '@MttBlogBundle/Resources/public/app/app.js'
        '@MttBlogBundle/Resources/public/app/router.js'
        '@MttBlogBundle/Resources/public/app/routes/*.js'
        '@MttBlogBundle/Resources/public/app/helpers/*.js'
        '@MttBlogBundle/Resources/public/app/models/*.js'
        '@MttBlogBundle/Resources/public/app/components/*.js'
        '@MttBlogBundle/Resources/public/app/controllers/*.js'
        '@MttBlogBundle/Resources/public/app/views/*.js'
        '@MttBlogBundle/Resources/public/app/templates.js'
    %}
    <script type="text/javascript" src="{{ asset_url }}"></script>
    {% endjavascripts %}
{% endblock %}
